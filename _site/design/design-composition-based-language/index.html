
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>A Programming Language Based on Composition of Mechanisms</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A very simple mechanism-oriented programming language which uses composition of mechanisms exclusively.">
    <meta name="author" content="Eric Hosick">

    <meta property="og:title" content="Eric Hosick" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="http://www.erichosick.com/assets/img/eric_hosick.jpg"/> 
    <meta property="og:description" content="Eric Hosick's personal blog page and stuff."/>
    <meta property="fb:admins" content="erichosick" />

    <link href='//netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap-combined.min.css' rel='stylesheet'>    
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="http://fonts.googleapis.com/css?family=Pontano+Sans" rel="stylesheet" type="text/css">

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>


    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

  </head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="http://www.erichosick.com"><img src="/assets/img/logoRuby.png"></img></a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="/index.html">Home</a></li>
              <li><a href="/categories.html">Categories</a></li>
              <li><a href="/pages.html">Pages</a></li>
              <li><a href="/tags.html">Tags</a></li>
            </ul>
            <p class="pull-right">
              <a class="nav-a-social" href="https://plus.google.com/101227313031284036080/posts" target="_blank"><i class="icon-google-color icon-social"></i></a>
              <a class="nav-a-social" href="http://www.twitter.com/erichosick" target="_blank"><i class="icon-twitter-color icon-social"></i></a>
              <a class="nav-a-social" href="mailto:erichosick@gmail.com"><i class="icon-mail-color icon-social"></i></a>
            </p>
          </div>
        </div>
      </div>
    </div>    

    <div class="container-fluid container-main">
      
<div class="row-fluid">
  <div class="span3">
    <div class="well sidebar-nav">
  <ul class="nav nav-list">
    <li class="nav-header">About</li>
    <li><img src="/assets/img/eric_hosick.jpg" class="img-rounded"></li>
    <li> <a href="http://www.erichosick.com">Eric Hosick</a><p class="nav-about">Creator of Interface Vision, NoMethods, Agile enthusiast, entrepreneur, founder, BDD advocate, lecturer, technologist, developer, scrum master and book writer.</p></li>
    <li><p><a href="http://twitter.com/erichosick" target="_blank">erichosick@gmail.com</a></p></li>
  </ul>
</div>

    
    <div class="well sidebar-nav">
      <ul class="nav nav-list">
        <li class="nav-header">Tags</li>
        
        


  
     
    	<li><a href="/tags.html#language-ref">language <span>1</span></a></li>
     
    	<li><a href="/tags.html#persistence-ref">persistence <span>1</span></a></li>
     
    	<li><a href="/tags.html#scripting-ref">scripting <span>1</span></a></li>
     
    	<li><a href="/tags.html#composition-ref">composition <span>5</span></a></li>
     
    	<li><a href="/tags.html#mechanisms-ref">mechanisms <span>2</span></a></li>
     
    	<li><a href="/tags.html#policies-ref">policies <span>1</span></a></li>
     
    	<li><a href="/tags.html#homoiconic-ref">homoiconic <span>1</span></a></li>
     
    	<li><a href="/tags.html#homoiconicity-ref">homoiconicity <span>1</span></a></li>
    
  



      </ul>
    </div><!--/.well -->
      
    
  </div>
  <div class="span9">
    <div class="hero-unit">
      <div class="page-header">
        <h1>A Programming Language Based on Composition of Mechanisms</h1>
        <div class="row-fluid">
          <div class="span2">
            <img src="/assets/img/eric_hosick.jpg" class="img-rounded">
          </div>
          <div class="span8">
            <p>by <a href="http://twitter.com/erichosick" target="_blank">Eric Hosick</a> (erichosick@gmail.com)</p>
            <h4>Published <small class="date">19 December 2013</small></h4>
          </div>
        </div>
      </div>
      <h2 id="introduction">Introduction</h2>

<p>Interface Vision is a Gui based visual object language and framework. Programming is done by hooking up <a href="/design/design-mechanisms-and-policies">mechanisms</a>: either visually or by coding in C#.</p>

<p>The composition of mechanisms results in a policy (what is done) and looks very different from defining a mechanism (see <a href="/design/design-mechanisms-and-policies">mechanisms</a>).</p>

<p>The syntax in C# for defining policies looks funky so we’ve designed a language called SipCoffee.</p>

<p>We focus on the creation of policy through the composition of existing mechanisms. There is no language syntax to describe <a href="/design/design-mechanisms-and-policies">mechanisms</a>.</p>

<h2 id="examples">Examples</h2>

<h3 id="hello-world-policy">Hello World Policy</h3>

<p>The Hello world policy in SipCoffee:</p>

<div id="id-s1-1-top">&nbsp;</div>

<pre><code>(Application
  (WriteLine "Hello World")
)

// with named properties
(Application
  do (WriteLine text "Hello World")
)
</code></pre>

<h6 id="id-s1-1">Policy-1.1: Hello World in SipCoffee.</h6>

<h3 id="hello-world-explained">Hello World Explained</h3>

<p><a href="#id-s1-1-top">Policy-1.1</a> contains two mechanisms named Application and WriteLine (mechanisms written in C#). </p>

<p>Application has the property do. The do property contains an instance of WriteLine.</p>

<p>WriteLine has a text property, which is the text to write, and has the value “Hello World”.</p>

<p>We can also define our policy by assuming an order for properties. This does lead to readability problems so you may want to use it sparingly.</p>

<h3 id="hello-world-10-times">Hello World 10 Times</h3>

<p>A policy to write Hello World 10 times on separate lines.</p>

<div id="id-s1-2-top">&nbsp;</div>

<pre><code>(Application
  (For 1 20 2 
    (WriteLine "Hello World")
  )
)


// with named properties
(Application
  do (For start 1 end 20 by 2 
    do (WriteLine text "Hello World")
  )
)
</code></pre>

<h6 id="id-s1-2">Policy-1.2: Hello written 10 times in SipCoffee.</h6>

<h3 id="a-foreach">A ForEach</h3>

<p>A policy to write the numbers 1, 2, 4, 8, 16 and 32 on separate lines.</p>

<div id="id-s1-3-top">&nbsp;</div>
<pre><code>(Application
  (ForEach
    (List[ 1 2 4 8 16 32 ])
    (WriteLine CurrentItem())
  )
)
</code></pre>

<h6 id="id-s1-3">Policy-1.3: A for each in SipCoffee.</h6>

<h3 id="another-foreach">Another ForEach</h3>

<p>A policy to write out the first name of users Jane, Smith and Joe: each on a new line.</p>

<div id="id-s1-4-top">&nbsp;</div>
<pre><code>(Application
  (ForEach
    (List[
      (Hash
        (KeyPair "firstName" "Jane")
        (KeyPair "lastName" "First")
      )
      (Hash
        (KeyPair "firstName" value "Smith")
        (KeyPair "lastName" value "Between")
      )
      (Hash
        (KeyPair "firstName" "Joe")
        (KeyPair "lastName" "Last")
      )]
    )
    (WriteLine
      (HashRead "firstName" CurrentItem())
    )
  )
)
</code></pre>

<h6 id="id-s1-4">Policy-1.4: A for each in SipCoffee.</h6>

<h3 id="foreach-using-sql">ForEach Using Sql</h3>

<p>A policy to write out the first name of users with data coming from a database: each on a new line.</p>

<div id="id-s1-4-top">&nbsp;</div>
<pre><code>(Application
  (ForEach
    (SqlConnect "someDatabase"
      (SqlQuery "SELECT firstName, lastName FROM users")
    )
    (WriteLine (HashRead "firstName" CurrentItem()))
  )
)

// named propertes
(Application do
  (ForEach item
    (SqlConnect databaseName "someDatabase"
      (SqlQuery sql "SELECT firstName, lastName FROM users")
    )
    (WriteLine text (HashRead key "firstName" hashTable CurrentItem()))
  )
)
</code></pre>

<h6 id="id-s1-4">Policy-1.4: A for each in SipCoffee.</h6>

<h3 id="foreach-using-sql-explained">ForEach Using Sql Explained</h3>

<p>A ForEach mechanism contains an item property. The item property contains a SqlConnect mechanism configured with a database (named “someDatabase”) and a command (a SqlQuery mechanism with sql “SELECT firstName, lastName FROM users”).</p>

<p>The ForEach mechanism invokes the SqlConnect mechanism. The SqlConnect mechanism connects to the database and invokes the mechanism located in the command property. This causes SqlQuery to invoke which runs the sql and returns a list of records to SqlConnect. Each record is a hash table with a key/value pair for each field.</p>

<p>SqlConnect passes that list back up to the ForEach mechanism. The ForEach mechanism is now able to iterate through the list of records.</p>

<p>The ForEach mechanism, internally, stores the current item in the list. It then invokes the mechanism located in the do property. In this case, ForEach invokes the WriteLine mechanism.</p>

<p>We want to write out the first name of each user. This means we need to access that field within the current item (which happens to be a HashTable mechanism).</p>

<p>This means we use the HashRead mechanism in the text property of WriteLine. What hash table are we reading from? Well, the CurrentItem mechanism is able to retrieve the current item from the ForEach mechanism. This then becomes the hash table that the HashRead mechanism uses. The key is then used to locate an entry in the hash table: in this case “firstName”.</p>

<p>HashRead passes up to WriteLine the result of reading from the hash table (in this case a string) and the WriteLine mechanism writes the final value of text to the console.</p>

<h2 id="the-syntax">The Syntax</h2>

<p>Syntactically, the language is simple.</p>

<p>Mechanisms are upper/lower case and properties are lower case. A property contains a mechanism or composition of mechanisms.</p>

<p>We use () to define the contents of a mechanism.</p>

<h2 id="parsing-expression-grammar">Parsing Expression Grammar</h2>

<p>A pseudo parsing expression grammar is as follows:</p>

<div id="id-g1-1-top">&nbsp;</div>
<pre><code>a} PROPERTY &lt;- MECHANISM
b} PROPERTY &lt;- (MECHANISM PROPERTY+)
d} PROPERTY &lt;- (MECHANISM [PROPERTY*])
</code></pre>

<h6 id="id-g1-1">Grammar-1.1: Parsing expression grammar for SipCoffee.</h6>

<h3 id="primitives-are-mechanisms">Primitives are Mechanisms</h3>

<p>Primitives are things like string, numbers and dates (to name a few). Primitives are actually mechanisms.</p>

<p>Examples being:</p>

<ul>
  <li>Strings - “Hello” (String mechanism)</li>
  <li>Floats - 34.56f (Float mechanism)</li>
  <li>Reals - 3.456 (Real mechanism)</li>
  <li>Integers - 34 (Int mechanism)</li>
  <li>Longs - 56l (Long mechanism)</li>
  <li>Dates - 1994-11-05T08:15:30-05:00 (Date mechanism - Considering only allowing UTC dates to be stored)</li>
</ul>

<h3 id="collections">Collections</h3>

<p>A collection is defined by simply listing the item in the array separated by white space (we could also separate items using commas).</p>

<ul>
  <li>array of strings - [“Hello” “And” “GoodBye”]</li>
  <li>array of integers - [1 2 5 6 12 656]</li>
  <li>array of floats - [23.0f 345.4f 63.346f]</li>
  <li>array of Mechanisms - [(User “Jane”) (User “Toan”) (User “Frank”)]</li>
</ul>

<h2 id="availability">Availability</h2>

<p>SipCoffee works with mechanisms defined in C#. We’ve created an initial persister that is able to save a program configured in Interface Vision as SipCoffee. The persister will itself be written in SipCoffee. When we get to that point, we will blog about it.</p>

<p>In the mean time, please follow us <a href="http://www.twitter.com/interfaceVision">@interfaceVision</a> and/or <a href="http://www.twitter.com/erichosick">@erichosick</a>.</p>

<h2 id="other-possible-syntax">Other Possible Syntax</h2>

<p>We could also use spacing to associate mechanisms with properties removing the need for ()</p>

<pre><code>Application
  do ForEach
    item List [1 2 4 8 16 32]
    do WriteLine
      text CurrentItem

// another example

Application
  do ForEach
    item SqlConnect
      database "someDatabase"
      command SqlQuery
        sql "SELECT firstName, lastName FROM users"
    do WriteLine
      text HashRead
        hash CurrentItem
        key "firstName"
</code></pre>

<p>and with property ordering</p>

<pre><code>Application
  ForEach
    List [1 2 4 8 16 32]
    WriteLine
      CurrentItem

// another example

Application
  ForEach
    SqlConnect
      "someDatabase"
      SqlQuery
        "SELECT firstName, lastName FROM users"
    WriteLine
      HashRead
        CurrentItem
        "firstName"
</code></pre>

<p>Though readability is getting tricky and knowledge of each mechanism’s property ordering is required.</p>

<p>Something that looks a lot like functional programming (it could even be functional programming)</p>

<pre><code>Application(
  ForEach(
    List ([ 1 2 4 8 16 32 ]),
    WriteLine(
      CurrentItem()
    )
  )
)
  
// another example

Application(
  ForEach(
    SqlConnect("someDatabase",
      SqlQuery("SELECT firstName, lastName FROM users")
    ),
    WriteLine(
      HashRead(CurrentItem(), "firstName")
    )
  )
)
</code></pre>

<h2 id="conclusion">Conclusion</h2>

<p>That’s it. A very simple language based on composition of mechanisms called policies. Policies are your program or application.</p>

<h2 id="next-step">Next Step</h2>

<p>The <a href="/design/example-window-basic">next step</a> was to get a program to display a native window using SipCoffee.</p>


      <hr>
      <div class="pagination pagination-centered">
        <ul>
        
          <li class="prev"><a href="/design/design-overloading-sip" title="Why We Don't Need Overloading">&larr; Previous</a></li>
        
          <li><a href="/archive.html">Archive</a></li>
        
          <li class="next"><a href="/design/example-window-basic" title="Example - Basic Windows">Next &rarr;</a></li>
        
        </ul>
      </div>    
      <hr>
      <div>
        


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'erichosickblog'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




      </div>

    </div>    
  </div>
</div>



      <hr>
      <footer>
         <p>&copy; <a href="http://www.twitter.com/erichosick" target="_blank">Eric Hosick</a> 2012</p>
       </footer>
    </div>    
    <!--

    <script src="/assets/js/jquery.js"></script>
    <script src="/assets/js/bootstrap-transition.js"></script>
    <script src="/assets/js/bootstrap-alert.js"></script>
    <script src="/assets/js/bootstrap-modal.js"></script>
    <script src="/assets/js/bootstrap-dropdown.js"></script>
    <script src="/assets/js/bootstrap-scrollspy.js"></script>
    <script src="/assets/js/bootstrap-tab.js"></script>
    <script src="/assets/js/bootstrap-tooltip.js"></script>
    <script src="/assets/js/bootstrap-popover.js"></script>
    <script src="/assets/js/bootstrap-button.js"></script>
    <script src="/assets/js/bootstrap-collapse.js"></script>
    <script src="/assets/js/bootstrap-carousel.js"></script>
    <script src="/assets/js/bootstrap-typeahead.js"></script>
    
    -->

    
  </body>
</html>

