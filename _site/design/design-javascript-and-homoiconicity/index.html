
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Javascript and Homoiconicity: Source-code that is a Data-Structure</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Homoiconicity should be a feature of programming languages and this is how to do it in Javascript.">
    <meta name="author" content="Eric Hosick">

    <meta property="og:title" content="Eric Hosick" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="http://www.erichosick.com/assets/img/eric_hosick.jpg"/> 
    <meta property="og:description" content="Eric Hosick's personal blog page and stuff."/>
    <meta property="fb:admins" content="erichosick" />

    <link href='//netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap-combined.min.css' rel='stylesheet'>    
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="http://fonts.googleapis.com/css?family=Pontano+Sans" rel="stylesheet" type="text/css">

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>


    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

  </head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="http://www.erichosick.com"><img src="/assets/img/logoRuby.png"></img></a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="/index.html">Home</a></li>
              <li><a href="/categories.html">Categories</a></li>
              <li><a href="/pages.html">Pages</a></li>
              <li><a href="/tags.html">Tags</a></li>
            </ul>
            <p class="pull-right">
              <a class="nav-a-social" href="https://plus.google.com/101227313031284036080/posts" target="_blank"><i class="icon-google-color icon-social"></i></a>
              <a class="nav-a-social" href="http://www.twitter.com/erichosick" target="_blank"><i class="icon-twitter-color icon-social"></i></a>
              <a class="nav-a-social" href="mailto:erichosick@gmail.com"><i class="icon-mail-color icon-social"></i></a>
            </p>
          </div>
        </div>
      </div>
    </div>    

    <div class="container-fluid container-main">
      
<div class="row-fluid">
  <div class="span3">
    <div class="well sidebar-nav">
  <ul class="nav nav-list">
    <li class="nav-header">About</li>
    <li><img src="/assets/img/eric_hosick.jpg" class="img-rounded"></li>
    <li> <a href="http://www.erichosick.com">Eric Hosick</a><p class="nav-about">Creator of Interface Vision, NoMethods, Agile enthusiast, entrepreneur, founder, BDD advocate, lecturer, technologist, developer, scrum master and book writer.</p></li>
    <li><p><a href="http://twitter.com/erichosick" target="_blank">erichosick@gmail.com</a></p></li>
  </ul>
</div>

    
    <div class="well sidebar-nav">
      <ul class="nav nav-list">
        <li class="nav-header">Tags</li>
        
        


  
     
    	<li><a href="/tags.html#Javascript-ref">Javascript <span>2</span></a></li>
     
    	<li><a href="/tags.html#composition-ref">composition <span>5</span></a></li>
     
    	<li><a href="/tags.html#Homoiconicity-ref">Homoiconicity <span>2</span></a></li>
     
    	<li><a href="/tags.html#Homoiconic-ref">Homoiconic <span>2</span></a></li>
    
  



      </ul>
    </div><!--/.well -->
      
    
  </div>
  <div class="span9">
    <div class="hero-unit">
      <div class="page-header">
        <h1>Javascript and Homoiconicity: Source-code that is a Data-Structure</h1>
        <div class="row-fluid">
          <div class="span2">
            <img src="/assets/img/eric_hosick.jpg" class="img-rounded">
          </div>
          <div class="span8">
            <p>by <a href="http://twitter.com/erichosick" target="_blank">Eric Hosick</a> (erichosick@gmail.com)</p>
            <h4>Published <small class="date">18 September 2014</small></h4>
          </div>
        </div>
      </div>
      <h2 id="introduction">Introduction</h2>

<p>You can mess around with a demo project in <a href="https://github.com/erichosick/jscriptVision">github</a>.</p>

<p><a href="https://en.wikipedia.org/wiki/Homoiconicity">Homoiconicity</a> is a feature of a language where the language’s “program code is represented as the language’s fundamental data type” (also see <a href="http://c2.com/cgi/wiki?HomoiconicLanguages">Homoiconic Languages</a> on c2).</p>

<p>Javascript is a loosely typed language whose fundamental datatypes are primitives (strings, floats, etc.) and functions (lambdas) with properties (meaning functions can also be used as objects). From these fundamental data-types, we will create a single fundamental data type for Javascript (called a mechanism).</p>

<p>Homoiconic source-code is a data-structure in and of itself. Programming becomes the composition of this single fundamental datatype which results in the new algorithm (the program) and data-structure at the same time.</p>

<h2 id="why-is-homoiconicity-so-cool">Why is Homoiconicity So Cool</h2>

<p>Programming is the automation of process. We take real world processes and define them in algorithms that operate against data structures.</p>

<p>Data-structures and algorithms are cool. All the software we see today, and other abstractions like objects and functions, are built from these two abstractions: data-structures and algorithms.</p>

<p>The cool thing about data-structures is the things you can do with them. You can:</p>

<ul>
  <li>store them</li>
  <li>load them</li>
  <li>traverse them</li>
  <li>order them</li>
  <li>duplicate them</li>
  <li>give them “meaning” in context</li>
  <li>pass them between algorithms</li>
  <li>search them</li>
  <li>splice them</li>
  <li>MERGE them</li>
  <li>insert elements</li>
  <li>delete elements</li>
  <li>multiple visual representations</li>
  <li>every element has the same signature (no specialization: it’s just data)</li>
</ul>

<p>and a lot of other cool things.</p>

<p>Imagine then a program whose source-code is a data-structure in and of itself. There is a one-to-one mapping of your source-code with the allocated instances of objects on the heap during run-time. This means anything you can do with a data-structure, you can do to a program: even during run time.</p>

<ul>
  <li>Want to inject behavior at any point in a program: even during run-time? Easily done.</li>
  <li>Want to persist any part of your program? Easily done.</li>
  <li>Want to check for lack of error handling in a program? Run an agent against the data structure.</li>
  <li>Want to merge two programs during run-time? Yep! You can easily merge two programs.</li>
  <li>Want to scale your program to support thousands of users? Just make as many copies of the program as you want and run each one in their own thread (say goodbye to issues like re-entrance).</li>
</ul>

<p>And this:</p>

<blockquote>
  <p>You can display and edit your program using different visual representations!</p>
</blockquote>

<p>Just like you can display and edit trees in many <a href="https://www.google.com/search?q=tree+structure&amp;tbm=isch">different visual formats</a>, you can display and edit source code visually. You can have multiple visual representations of the same program: each one tailored towards the reader of your program!</p>

<p>It really surprises me that we have gone this far without Homoiconicity going main stream.</p>

<h2 id="why-is-homoiconicity-hard-to-do-in-languages">Why is Homoiconicity Hard To Do in Languages?</h2>

<p>I think I know why it is hard to find languages that are really Homoiconic. However, I have a really hard time articulating the reasons why. Perhaps it could be articulated as follows:</p>

<blockquote>
  <p>Homoiconic languages don’t need parameterized sub-routines.</p>
</blockquote>

<p>If you are creating a language, and remove parameterized sub-routines as the core abstraction for communication of data between sub-routines, you end up with a Homoiconic language.</p>

<p>The fundamental datatypes (mechanisms) take the place of parameterized sub-routines and passing of information between mechanisms becomes an inherent part of the data-structure you create when programming.</p>

<h2 id="javascript-and-homoiconicity">Javascript and Homoiconicity</h2>

<p>Here is Javascript code that is also a data-structure (both the code and the instances on the heap are a data-structure):</p>

<pre><code>// Write the addition of ((3 + -1) + -1) to the console.
var msgWrite = writeToCon ({
  text: add({
     left: add({
       left: num(3),
       right: num(-1)
     }),
     right: num(-1)
  })
});

msgWrite.go; // invoke the program
</code></pre>

<p>How about we persist it:</p>

<pre><code>var persistIt = persist ({
  fileName: "/somefile",
  fileType: "json",
  program: msgWrite
});

persistIt.go; // invoke the program
</code></pre>

<p>How about we persist it using a file name and file type entered by a user on a form:</p>

<pre><code>var persistIt2 = persist ({
  fileName: formFieldGet ({
    formName: "persist_form",
    formField: "file_name"
  }),
  fileType: formFieldGet ({
    formName: "persist_form",
    formField: "file_type"
  }),
  program: msgWrite
});

persistIt2.go; // invoke the program
</code></pre>

<p>How about we inject behavior to write a message to the console when the file_type form field is accessed:</p>

<pre><code>var persistIt3 = persist ({
  fileName: formFieldGet ({
    formName: "persist_form",
    formField: "file_name"
  }),
  fileType: writeToCon ({
    text: formFieldGet ({
      formName: "persist_form",
      formField: "file_type"
    }),
  }),
  program: msgWrite
});

persistIt3.go; // invoke the program
</code></pre>

<p>That’s kinda cool. When the persister-mechanism runs go on the writeToCon-mechanism placed in the fileType property, writeToCon runs the mechanism in the text property.</p>

<p>That eventually causes the text in the form field to propagate up to the writeToCon-mechanism which then writes that text to the console.</p>

<p>The writeToCon-mechanism then propagates the text up to the persist-mechanism which uses the text to determine the file type.</p>

<p>If you look back, you will notice that no matter how complex the program, the interface to it is the exact same. To invoke the behavior of <strong>any program</strong> you simply call go on that program.</p>

<p>Standardization of behavioral interface is an emergent property of any Homoiconic language and may be a good litmus test to determine if a language is Homoiconic.</p>

<h2 id="but-this-looks-more-like-a-framework-than-a-language">But This Looks More Like a Framework Than a Language</h2>

<p>Exactly!</p>

<p>In a Homoiconic language, there is no way to distinguish the language itself from the software frameworks built in the language because <strong>everything</strong> is a fundamental datatype (a mechanism): even <strong>scope</strong> is implemented as a mechanism.</p>

<p>In my opinion, separation of language and framework is a red-flag that we are doing something wrong.</p>

<p>Fundamental parts of the language are key words (loop, between, forEach, withEach, doWhile, etc.) but the structure of the code does not give any hint as to what those key words are.</p>

<pre><code>var msgLoop = between {
  from: num(2),
  to: num(8),
  by: num(2)
  do: writeToCon({
    text: str("Hello world!")
  })
}

msgLoop.go; // invoke the program
</code></pre>

<p>Traditional code would give us a hint as to what the keywords are:</p>

<pre><code>for (int i=2; i&lt;=8; i++) {
  Console.WriteLn ("Hello world!")
}
</code></pre>

<h2 id="difficult-to-read">Difficult to Read</h2>

<p>As pointed out by this <a href="https://blogs.oracle.com/blue/entry/homoiconic_languages">great blog post</a> on the subject by blue, “it is hard for humans to visually parse as the uniformity of the language often removes any visual cues that we are familiar with in most of the languages”.</p>

<p>You can see an example of a web server configured from scratch <a href="/design/vision-minimal-webserver">here</a> using a Homoiconic language called SipCoffee. In 50 lines of code, we compose a multi-threaded web server that supports socket routing. But it is a little difficult to read at first due to a lack of visual cues. However, remember that since the code is a data-structure, we can display the code in anyway we like: even a visual representation of the code (hint hint).</p>

<p>Perhaps, some day, we will end up with visual programming languages that, behind the scenes, are simply manipulating code that is a data-structure.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Although there is still <a href="http://c2.com/cgi/wiki?HomoiconicityClassification">debate</a> as to what makes a language Homoiconic, I think we have shown that it is indeed possible to program in Javascript using only a fundamental datatype (a mechanism).</p>

<p>Our programs are indeed data-structures both in code and when instantiated on the heap.</p>

<p>Our code being a data-structure gives us the ability to manipulate code just like any data-structure. This means we can join, cut, copy, merge, delete, search, sort, load and save code: even during runtime!</p>

<p>If you find our work on Homoiconicity interesting, please follow us <a href="http://www.twitter.com/interfaceVision">@interfaceVision</a> and/or <a href="http://www.twitter.com/erichosick">@erichosick</a>.</p>

      <hr>
      <div class="pagination pagination-centered">
        <ul>
        
          <li class="prev"><a href="/design/design-mop-and-javascript" title="Message-Oriented Programming With Javascript">&larr; Previous</a></li>
        
          <li><a href="/archive.html">Archive</a></li>
        
          <li class="next"><a href="/design/design-csharp-and-homoiconicity" title="C# and Homoiconicity: Source-code that is a Data-Structure">Next &rarr;</a></li>
        
        </ul>
      </div>    
      <hr>
      <div>
        


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'erichosickblog'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




      </div>

    </div>    
  </div>
</div>



      <hr>
      <footer>
         <p>&copy; <a href="http://www.twitter.com/erichosick" target="_blank">Eric Hosick</a> 2012</p>
       </footer>
    </div>    
    <!--

    <script src="/assets/js/jquery.js"></script>
    <script src="/assets/js/bootstrap-transition.js"></script>
    <script src="/assets/js/bootstrap-alert.js"></script>
    <script src="/assets/js/bootstrap-modal.js"></script>
    <script src="/assets/js/bootstrap-dropdown.js"></script>
    <script src="/assets/js/bootstrap-scrollspy.js"></script>
    <script src="/assets/js/bootstrap-tab.js"></script>
    <script src="/assets/js/bootstrap-tooltip.js"></script>
    <script src="/assets/js/bootstrap-popover.js"></script>
    <script src="/assets/js/bootstrap-button.js"></script>
    <script src="/assets/js/bootstrap-collapse.js"></script>
    <script src="/assets/js/bootstrap-carousel.js"></script>
    <script src="/assets/js/bootstrap-typeahead.js"></script>
    
    -->

    
  </body>
</html>

