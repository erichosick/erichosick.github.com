
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Mechanisms</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Mechanisms - Blurring the Distinction Between Languages, Operating Systems and Frameworks">
    <meta name="author" content="Eric Hosick">

    <meta property="og:title" content="Eric Hosick" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="http://www.erichosick.com/assets/img/eric_hosick.jpg"/> 
    <meta property="og:description" content="Eric Hosick's personal blog page and stuff."/>
    <meta property="fb:admins" content="erichosick" />

    <link href='//netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap-combined.min.css' rel='stylesheet'>    
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="http://fonts.googleapis.com/css?family=Pontano+Sans" rel="stylesheet" type="text/css">

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>


    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

  </head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="http://www.erichosick.com"><img src="/assets/img/logoRuby.png"></img></a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="/index.html">Home</a></li>
              <li><a href="/categories.html">Categories</a></li>
              <li><a href="/pages.html">Pages</a></li>
              <li><a href="/tags.html">Tags</a></li>
            </ul>
            <p class="pull-right">
              <a class="nav-a-social" href="https://plus.google.com/101227313031284036080/posts" target="_blank"><i class="icon-google-color icon-social"></i></a>
              <a class="nav-a-social" href="http://www.twitter.com/erichosick" target="_blank"><i class="icon-twitter-color icon-social"></i></a>
              <a class="nav-a-social" href="mailto:erichosick@gmail.com"><i class="icon-mail-color icon-social"></i></a>
            </p>
          </div>
        </div>
      </div>
    </div>    

    <div class="container-fluid container-main">
      
<div class="row-fluid">
  <div class="span3">
    <div class="well sidebar-nav">
  <ul class="nav nav-list">
    <li class="nav-header">About</li>
    <li><img src="/assets/img/eric_hosick.jpg" class="img-rounded"></li>
    <li> <a href="http://www.erichosick.com">Eric Hosick</a><p class="nav-about">Creator of Interface Vision, NoMethods, Agile enthusiast, entrepreneur, founder, BDD advocate, lecturer, technologist, developer, scrum master and book writer.</p></li>
    <li><p><a href="http://twitter.com/erichosick" target="_blank">erichosick@gmail.com</a></p></li>
  </ul>
</div>

    
    <div class="well sidebar-nav">
      <ul class="nav nav-list">
        <li class="nav-header">Tags</li>
        
        


  
     
    	<li><a href="/tags.html#C#-ref">C# <span>4</span></a></li>
     
    	<li><a href="/tags.html#csharp-ref">csharp <span>1</span></a></li>
     
    	<li><a href="/tags.html#Javascript-ref">Javascript <span>4</span></a></li>
     
    	<li><a href="/tags.html#composition-ref">composition <span>5</span></a></li>
     
    	<li><a href="/tags.html#mechanisms-ref">mechanisms <span>2</span></a></li>
     
    	<li><a href="/tags.html#policy-ref">policy <span>1</span></a></li>
     
    	<li><a href="/tags.html#frameworks-ref">frameworks <span>1</span></a></li>
     
    	<li><a href="/tags.html#programming languages-ref">programming languages <span>1</span></a></li>
    
  



      </ul>
    </div><!--/.well -->
      
    
  </div>
  <div class="span9">
    <div class="hero-unit">
      <div class="page-header">
        <h1>Mechanisms</h1>
        <div class="row-fluid">
          <div class="span2">
            <img src="/assets/img/eric_hosick.jpg" class="img-rounded">
          </div>
          <div class="span8">
            <p>by <a href="http://twitter.com/erichosick" target="_blank">Eric Hosick</a> (erichosick@gmail.com)</p>
            <h4>Published <small class="date">24 September 2014</small></h4>
          </div>
        </div>
      </div>
      <script src="/assets/js/mCore.js"></script>

<script src="/assets/js/mWeb.js"></script>

<h2 id="introduction">Introduction</h2>

<p>Please visit the <a href="https://github.com/mechanismsjs/mech-core">Mech-core</a> and <a href="https://github.com/mechanismsjs/mech-web">Mech-web</a> gitub repository (also <a href="https://www.npmjs.org/package/mech-core">Mech-core NPM</a> and <a href="https://www.npmjs.org/package/mech-web">Mech-web NPM</a> ) to checkout and play with javascript based mechanisms.</p>

<p>A working example (may require latest browser):</p>

<form id="add">
  <input id="lft" value="5" />
  +
  <input id="rgh" value="-2" />
  =
  <input id="res" value="" />
  <input type="button" value="calc" onclick="
  M.propSet(&quot;value&quot;, M.e$(&quot;res&quot;),
    M.add(M.p$(&quot;value&quot;, M.e$(&quot;lft&quot;)), M.p$(&quot;value&quot;, M.e$(&quot;rgh&quot;)))
  ).go;
" />
</form>

<pre><code>// The policy invoked when calc is pressed.
// Try copying and pasting the code into your browser console.

M.propSet("value", M.getElemById("res"),
  M.add(
    M.propGet("value", M.getElemById("lft")),
    M.propGet("value", M.getElemById("rgh"))
  )
).go;
</code></pre>

<p>Software engineers strive to separate the what (policy) from the how (mechanism) for reasons like <a href="https://en.wikipedia.org/wiki/Code_reuse">code re-use</a>, <a href="https://en.wikipedia.org/wiki/Maintainability">maintainability</a>, <a href="https://en.wikipedia.org/wiki/Modular_programming">modularity</a> and <a href="https://en.wikipedia.org/wiki/Separation_of_concerns">separation of concerns</a>.</p>

<p>We propose a mechanism centric <a href="https://en.wikipedia.org/wiki/Programming_paradigm">programming paradigm</a> to help engineers design software frameworks which are easy to use.</p>

<p>Mechanisms help framework users focus on their business solutions and not the framework.</p>

<h2 id="what-are-mechanisms">What are Mechanisms?</h2>

<p>A mechanism is “the how”. Mechanisms cover everything from language syntax to operating system features. Examples are:</p>

<ul>
  <li><a href="https://en.wikipedia.org/wiki/Syntax_%28programming_languages%29">language syntax</a> mechanisms
    <ul>
      <li>loops (while, doWhile, for, forEach, etc.)</li>
      <li>conditionals (==, &lt;, &gt;, &lt;=, etc.)</li>
      <li>primitive data types (int, float, var, array[], etc.)</li>
      <li><a href="https://en.wikipedia.org/wiki/Scope_%28computer_science%29">scope</a> ( {}, (), closures, parameterized sub-routines, blocks, etc.)</li>
    </ul>
  </li>
  <li><a href="https://en.wikipedia.org/wiki/Programming_paradigm">programming paradigm</a> mechanisms
    <ul>
      <li>behaviors, signals, switching, events, etc. (<a href="https://en.wikipedia.org/wiki/Functional_reactive_programming">functional reactive programming</a>)</li>
      <li>entities, ports, buffers, etc. (<a href="https://en.wikipedia.org/wiki/Flow-based_programming">flow based programming</a>)</li>
      <li>connectors, primitive constraints, quantities, constraint networks, probes (<a href="https://mitpress.mit.edu/sicp/full-text/book/book-Z-H-22.html#%_sec_3.3.5">constraint systems programming</a>)</li>
      <li>ourselves (mechanisms)</li>
      <li>etc.</li>
    </ul>
  </li>
  <li><a href="https://en.wikipedia.org/wiki/Operating_system">operating system</a> mechanisms
    <ul>
      <li>persistence (files, memory)</li>
      <li>communication (sockets, ports, pipes)</li>
      <li>ui/ux (windows, buttons)</li>
      <li>databases (sql, key/value stores, map reduce)</li>
      <li>devices (display, keyboard, mouse, trackpad)</li>
    </ul>
  </li>
  <li>math mechanisms
    <ul>
      <li>addition, subtraction, vectors, matrices, etc.</li>
    </ul>
  </li>
  <li>etc.</li>
</ul>

<p>Mechanisms are tightly coupled to the programming language by-which they were implemented.</p>

<h3 id="mechanisms-make-everything-first-class-citizens">Mechanisms Make Everything “First-Class Citizens”</h3>

<p>Every mechanism is a <a href="https://en.wikipedia.org/wiki/First-class_citizen">first class citizen</a>.</p>

<p>Even traditional programming statements like break or catch are first class citizens.</p>

<h3 id="defining-mechanisms">Defining Mechanisms</h3>

<p>A mechanism can be viewed as a fundamental data-type that also contains an algorithm:</p>

<ul>
  <li><strong>an algorithm</strong> - The source-code that implements the mechanism’s algorithm.</li>
  <li><strong>data</strong> - The data required by the mechanism to run the algorithm.
    <ul>
      <li>Since a mechanism <strong>is</strong> the only fundamental data-type, the data is also a mechanism.</li>
    </ul>
  </li>
  <li><strong>an invocation point</strong> - “go”, “makeItSo#1”, “run”
    <ul>
      <li>An invocation point is a calculated property.
        <ul>
          <li><a href="http://csharp.2000things.com/tag/calculated-property/">C#</a></li>
          <li>Javascript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/get">get</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/set">set</a></li>
          <li><a href="https://stackoverflow.com/questions/11716550/ruby-class-set-get">Ruby Language</a></li>
          <li><a href="http://blaag.haard.se/What-s-the-point-of-properties-in-Python/">Python</a></li>
        </ul>
      </li>
      <li>Optionally, invocation points can be defined for primitive data-types in any given language.</li>
    </ul>
  </li>
</ul>

<p>A single invocation point means the behavioral interface of <strong>all</strong> mechanisms (algorithms) is the same. You can think of it as playing a game of <a href="https://en.wikipedia.org/wiki/Dominoes">dominoes</a> where every tile has the exact same number of spots.</p>

<p class="featurette pagination-centered">
    <img class="featurette-image img-polaroid" src="/assets/img/posts/mechanisms_domino_interface.png" />
</p>

<p>This makes it really easy to use a mechanism.</p>

<h3 id="example-mechanisms">Example Mechanisms</h3>

<p>Mechanisms are tightly coupled to the language they are implemented in meaning the constructs we use to implement mechanisms may not be mechanisms.</p>

<p>Source-code for examples:</p>

<ul>
  <li><a href="/assets/js/mCore.js">Core Mechanisms</a></li>
  <li><a href="/assets/js/mWeb.js">Web Mechanisms</a></li>
  <li><a href="https://github.com/erichosick/jsVision">Github Repository</a></li>
</ul>

<p>An example add mechanism in Javascript with two invocation points (goNum and goStr):</p>

<pre><code>function AddF(){};
AddF.prototype = Object.create(DualArgF.prototype, {
  goNum: { get: function() { return this._l.goNum + this._r.goNum; }},
  goStr: { get: function() { return "(" + this._l.goStr + " + " + this._r.goStr + ")"; }}
});
function add(left, right) {
  var f = Object.create(AddF.prototype);
  f.l = left;
  f.r = right;
  return f;
};
</code></pre>

<p>in C#:</p>

<pre><code>public class add : mechanism {
  public mechanism l { get; set; }
  public mechanism r { get; set; }
  public mechanism go {
  	get { return new num { v = goNum }; }
  }
  public float goNum {
  	get { return l.goNum + r.goNum; }
  }
  public string goStr {
  	get { return string.Format ("({0} + {1})", l.goStr, r.goStr); }
  }
}
</code></pre>

<h2 id="what-are-policies">What are Policies?</h2>

<p>A policy is “the what” defined by using mechanisms. A policy is the program or application. Policies are fully decoupled from mechanism implementation.</p>

<h3 id="defining-policies">Defining Policies</h3>

<p>An example policy using <em>add(left,right)</em>, <em>propGet(propertyName, source)</em>, <em>propSet(propertyName, destination, source)</em> and <em>getElemById(id)</em> mechanisms.</p>

<form id="add">
  <input id="left" value="17" />
  +
  <input id="right" value="-5" />
  =
  <input id="result" value="" />
  <input type="button" value="calc" onclick="
  M.propSet(&quot;value&quot;, M.e$(&quot;result&quot;),
    M.add(M.p$(&quot;value&quot;, M.e$(&quot;left&quot;)), M.p$(&quot;value&quot;, M.e$(&quot;right&quot;)))
  ).go;
" />
</form>

<p>in Javascript (<a href="/design/design-composition-based-language">sip-ish</a>):</p>

<pre><code>// preferred syntax
M.propSet("value", M.getElemById("result"),
  M.add(
    M.propGet("value", M.getElemById("left")),
    M.propGet("value", M.getElemById("right"))
  )
).go;
</code></pre>

<p>in Javascript (object-ish):</p>

<pre><code>// Dooable but we prefer the sip-ish syntax
M.propSet({
  destProp: "value",
  dest: M.getElemById("result"),
  src: M.add({
    l: M.propGet({
      prop: "value",
      item: M.getElemById("left")
    }),
    r: M.propGet({
      prop: "value",
      item: M.getElemById("right")
    })
  })
}).go;
</code></pre>

<p>in <a href="/design/design-composition-based-language">SipCoffee</a>:</p>

<pre><code>(propSet "value"
  (getElemById "result")
  (add
    (propGet "value" (getElemById "left"))
    (propGet "value" (getElemById "right"))
  )
)
</code></pre>

<p>in C#:</p>

<pre><code>new propSet {
  destProp = "result",
  dest = new getElemById {id = "result "},
  src = new add {
    l = new propGet {
      item = new getElemById {id = "left"},
      prop = "left",
    },
    r = new propGet {
      item = new getElemById {id = "right"},
      prop = "right",
    }
  },
};
</code></pre>

<p>You’ve probably noticed already that policies can be easily converted between different languages.</p>

<h2 id="further-reading">Further Reading</h2>

<p>Some readings on separation of mechanism and policy:</p>

<ul>
  <li><a href="https://stackoverflow.com/questions/4784500/policy-and-mechanism">Stackoverflow - Policy and Mechanisms</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Separation_of_mechanism_and_policy">Wikipedia - Separation of Mechanism and Policy</a></li>
  <li><a href="https://sites.google.com/site/mylokesh/policyvsmechanism">Policy-vs-Mechanism</a></li>
</ul>

<h2 id="when-do-we-create-new-mechanisms">When do we Create New Mechanisms?</h2>

<p>All programs and applications are implemented using policies.</p>

<p>We ask ourselves the question:</p>

<blockquote>
  <p>Can we, efficiently, implement our policy (program) using available mechanisms?</p>
</blockquote>

<p>Create a mechanism when:</p>

<ul>
  <li>the policy can’t be defined because the mechanisms required don’t exist.</li>
  <li>the existing mechanisms aren’t efficient enough for the problem domain (the software framework is lacking).</li>
  <li>there are common policies that would look better if we created a single mechanism out of the policy.
    <ul>
      <li>In the examples, accessing a property of a DOM element requires two mechanisms. We could make that one.</li>
    </ul>
  </li>
</ul>

<p>A, lofty, goal is to provide all mechanisms necessary to create any policy within a single framework-programming-language.</p>

<h3 id="why-consider-efficiency">Why Consider Efficiency?</h3>

<p>Let’s consider only problems that could be solved using a <a href="https://en.wikipedia.org/wiki/Turing_machine">turing machine</a>.</p>

<p>All <a href="https://en.wikipedia.org/wiki/Turing_completeness">turing complete</a> problems could be solved by creating policies using only those mechanisms that make up a turing machine (example mechanisms being states, tables, alphabets, leftShift and rightShift).</p>

<p>However, on current day architectures, these mechanisms could result in policies with unsatisfactory algorithm execution times.</p>

<p>If a policy was taking too long to run, it’s time to reconsider the mechanisms being used and/or consider implementing new mechanisms better suited for the problem space.</p>

<h3 id="when-is-a-policy-a-mechanism">When Is a Policy a Mechanism</h3>

<p>Context is important when considering if something is a policy or a mechanism.</p>

<h4 id="a-company-that-ships-goods">A Company That Ships Goods</h4>

<ul>
  <li><strong>What</strong> we need to do is ship goods to our customers (the policy).</li>
  <li><strong>How</strong> we do that is with a truck, some goods and directions (the mechanisms).</li>
</ul>

<p>The truck is a mechanism.</p>

<h4 id="a-company-that-makes-trucks">A Company That Makes Trucks</h4>

<ul>
  <li><strong>What</strong> we need to do is assemble trucks (the policy).</li>
  <li><strong>How</strong> we do that is with purchased parts and tools (the mechanisms).</li>
</ul>

<p>The truck is a policy.</p>

<p>One domain’s mechanism is another domain’s policy.</p>

<h2 id="mechanisms--vs--parameterized-sub-routines">Mechanisms -vs- (Parameterized) Sub-Routines</h2>

<p>Sub-routines have data “pushed” into them via parameters (though sub-routines can “pull” from scoped data).</p>

<p>Mechanisms never have data “pushed” to them. Instead, mechanisms “pull” data into the mechanism for use by the algorithm.</p>

<p>Consider an add sub-routine with an addition algorithm:</p>

<pre><code>int add(int left, int right) {
  return left + right;
}
</code></pre>

<p>We “push” into the add sub-routine the values contained in the left and right parameters.</p>

<p>Consider an add mechanism (pseudo-code):</p>

<pre><code>mechanism add {
  mechanism left;
  mechanism right;
  
  mechanism goNum {
    return left.goNum + right.goNum;
  }
}
</code></pre>

<p>In this case, data is “pulled” from the left and right mechanisms by invoking those mechanisms: left.goNum and right.goNum.</p>

<p>Further examples using real languages are provided in the post <a href="/design/design-csharp-and-homoiconicity">C# and Homoiconicity</a> and <a href="/design/design-javascript-and-homoiconicity">Javascript and Homoiconicity</a>.</p>

<p>We must provide the left,right parameters to add at the time of invocation.</p>

<pre><code>int left = 5;
int right = 8;
int result = add(left, right); // We must push data into add right here.
</code></pre>

<p>We can’t get around it. While coding, we have to pass parameters to add at the time of invocation! It’s forced on us by the language syntax.</p>

<p>We can invoke an add mechanism at anytime in our code without knowing anything about left and right <strong>at the time of invocation</strong>!</p>

<pre><code>mechanism result = addMech.go; // We can initialize addMech somewhere else

// OR

mechanism result = addMech(left, right).go // or do it right here
</code></pre>

<h2 id="play-around-in-the-console">Play Around In the Console</h2>

<p>Go into a console (For example: View -&gt; Developer -&gt; JavaScript Console in Chrome).</p>

<pre><code>// NOTE: Be careful NOT to hook a policy to itself.

// Create addA policy
$ var addA = M.add(4, 2);
$ addA.go; // 6
$ addA.goStr; // (4 + 2)
$ addA.goBool; // true
$ addA.goArr; // [6]

// Create addB policy
$ var addB = M.add(3, -1);
$ addB.go; // 2
$ addB.goStr; // (3 + -1)

// Create addC policy
$ var addC = M.add(addA, addB);
$ addC.go; // 8
$ addC.goStr; // (4 + 2) + (3 + -1))

// Create a form-access policy
$ var frmL = M.p$("value", M.e$("left"));
$ frmL.go; // based on form data
$ frmL.goNum;
$ frmL.goStr;    

// Create addD policy
$ var addD = M.add(M.add(4, 2), M.p$("value", M.e$("left")));
$ addD.go;  // based on form data
$ addD.goNum;
$ addD.goStr;
$ addD.goBool;
$ addD.goArr;
</code></pre>

<h1 id="how-can-this-help-me-now">How Can This Help Me Now?</h1>

<p>You don’t need an entire framework of mechanisms to get started. You can improve separation of policy from the framework-programming-language you use by applying the <a href="https://en.wikipedia.org/wiki/Facade_pattern">façade pattern</a>: building out a few domain specific mechanisms.</p>

<p>If you find mechanisms interesting, please follow <a href="http://www.twitter.com/erichosick">@erichosick</a>.</p>


      <hr>
      <div class="pagination pagination-centered">
        <ul>
        
          <li class="prev"><a href="/design/design-csharp-and-homoiconicity" title="C# and Homoiconicity: Source-code that is a Data-Structure">&larr; Previous</a></li>
        
          <li><a href="/archive.html">Archive</a></li>
        
          <li class="next"><a href="/design/design-sequences-with-emitters" title="Generating Sequences Using Emitters">Next &rarr;</a></li>
        
        </ul>
      </div>    
      <hr>
      <div>
        


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'erichosickblog'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




      </div>

    </div>    
  </div>
</div>



      <hr>
      <footer>
         <p>&copy; <a href="http://www.twitter.com/erichosick" target="_blank">Eric Hosick</a> 2012</p>
       </footer>
    </div>    
    <!--

    <script src="/assets/js/jquery.js"></script>
    <script src="/assets/js/bootstrap-transition.js"></script>
    <script src="/assets/js/bootstrap-alert.js"></script>
    <script src="/assets/js/bootstrap-modal.js"></script>
    <script src="/assets/js/bootstrap-dropdown.js"></script>
    <script src="/assets/js/bootstrap-scrollspy.js"></script>
    <script src="/assets/js/bootstrap-tab.js"></script>
    <script src="/assets/js/bootstrap-tooltip.js"></script>
    <script src="/assets/js/bootstrap-popover.js"></script>
    <script src="/assets/js/bootstrap-button.js"></script>
    <script src="/assets/js/bootstrap-collapse.js"></script>
    <script src="/assets/js/bootstrap-carousel.js"></script>
    <script src="/assets/js/bootstrap-typeahead.js"></script>
    
    -->

    
  </body>
</html>

